<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Сварная сетка — ИжСтройМеталл</title>

    <!-- Slick-slider CSS -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css" />

    <style>
        :root { --red:#ff6347; --dark:#1f1f1f; --mid:#2c2c2c; --light:#e0e0e0; }

        * { box-sizing:border-box; }

        body{
            margin:0; padding:0;
            font-family:Arial, sans-serif;
            background:var(--dark); color:var(--light);
        }
        .container{ width:80%; margin:auto; }

        /* ---------- header ---------- */
        header{
            background:var(--mid); color:var(--light);
            padding:20px 0; display:flex; align-items:center;
        }
        #branding{ padding-left:20px; flex:1; }
        #branding h1{ margin:0; color:var(--red); }

        header nav ul{
            display:flex; gap:20px; margin:0; padding:0; list-style:none;
        }
        header nav a{
            color:var(--light); text-decoration:none; font-size:16px;
            transition:.3s;
        }
        header nav a:hover{ color:var(--red); }

        /* ---------- sections ---------- */
        h1{ color:var(--red); text-align:center; margin-top:50px; }

        .section{
            background:#333; margin:20px auto; padding:20px;
            border-radius:5px; box-shadow:0 0 10px rgba(0,0,0,.5);
        }

        /* ---------- slider ---------- */
        .slider{ margin-bottom:40px; }
        .slider img{ width:100%; height:400px; object-fit:cover; }

        /* ---------- cards ---------- */
        .card-grid{
            display:flex; gap:20px; flex-wrap:wrap; justify-content:center;
        }
        .card{
            width:300px; background:#444; border:1px solid #555;
            border-radius:5px; overflow:hidden; box-shadow:0 0 10px rgba(0,0,0,.5);
            transition:.2s; cursor:pointer;
        }
        .card:hover{ transform:scale(1.05); }
        .card img{ width:100%; height:200px; object-fit:cover; }
        .card .info{ padding:15px; }
        .card .info h3{ margin:0; color:var(--red); }

        /* ---------- order form ---------- */
        form.order-form{
            max-width:600px; margin:30px auto 50px;
            background:#222; padding:20px; border-radius:8px;
            box-shadow:0 0 15px rgba(255,99,71,.5);
        }
        form.order-form h2{ text-align:center; color:var(--red); }

        form.order-form label{ display:block; margin-bottom:6px; font-weight:700; }
        form.order-form input,
        form.order-form select,
        form.order-form textarea{
            width:100%; padding:8px;
            border:1px solid #555; border-radius:4px;
            background:#333; color:var(--light);
            margin-bottom:15px;
        }
        form.order-form select{ height:38px; }
        form.order-form textarea{ resize:vertical; height:80px; }

        form.order-form button{
            width:100%; padding:12px 20px;
            background:var(--red); color:#fff; font-weight:700; border:none;
            border-radius:5px; cursor:pointer; transition:.3s;
        }
        form.order-form button:hover{ background:#e5533c; }

        /* ---------- back button ---------- */
        .back-button{
            display:block; width:600px; max-width:90%; margin:10px auto 30px;
            background:#555; color:var(--light); text-align:center;
            padding:10px 0; border-radius:5px; text-decoration:none;
            transition:.3s;
        }
        .back-button:hover{ background:#444; }

        @media (max-width:680px){
            .container{ width:95%; }
        }
    </style>
</head>
<body>

<div class="container">

    <div id="home" class="section">
        <h1>Сварная сетка</h1>
        <p align="center">Сварная сетка — прочный и долговечный материал для строительства и промышленности. Мы поставляем продукцию только из качественной стали.</p>
    </div>

    <div class="section">
        <img src="https://avatars.mds.yandex.net/i?id=817f597c7d03e203f782e507d895f0211595e31b-4569781-images-thumbs&n=13"
             alt="Сварная сетка"
             style="width:100%; max-height:400px; object-fit:cover; border-radius:5px; box-shadow:0 0 10px rgba(0,0,0,0.5);" />
    </div>

    <div id="about" class="section">
        <h1>О продукте</h1>
        <p align="center">Сетка изготавливается методом точечной сварки продольных и поперечных прутков. Отличается высокой жёсткостью, устойчивостью к коррозии и долгим сроком службы.</p>
    </div>

    <div id="features" class="section">
        <h1>Характеристики</h1>
        <div class="card-grid">
            <div class="card">
                <img src="https://avatars.mds.yandex.net/i?id=817f597c7d03e203f782e507d895f0211595e31b-4569781-images-thumbs&n=13" alt="">
                <div class="info"><h3>Ячейка 50×50 мм</h3><p>Оптимально для средних нагрузок.</p></div>
            </div>
            <div class="card">
                <img src="https://avatars.mds.yandex.net/i?id=817f597c7d03e203f782e507d895f0211595e31b-4569781-images-thumbs&n=13" alt="">
                <div class="info"><h3>Пруток Ø 3 мм</h3><p>Высокая прочность и жёсткость.</p></div>
            </div>
            <div class="card">
                <img src="https://avatars.mds.yandex.net/i?id=817f597c7d03e203f782e507d895f0211595e31b-4569781-images-thumbs&n=13" alt="">
                <div class="info"><h3>2 × 1 м</h3><p>Стандартный формат листа.</p></div>
            </div>
        </div>
    </div>

    <div id="order" class="section">
        <h1>Заказать сетку</h1>

        <form class="order-form" id="orderForm">
            <h2>Форма заказа</h2>

            <label for="name">Имя</label>
            <input id="name" name="name" type="text" placeholder="Ваше имя" required>

            <label for="phone">Телефон</label>
            <input id="phone" name="phone" type="tel" placeholder="+7 (___) ___-__-__" required maxlength="18" pattern="^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$"
                   title="Формат: +7 (XXX) XXX-XX-XX">

            <label for="size">Размер листа</label>
            <select id="size" name="size" required>
                <option value="" disabled selected>Выберите размер</option>
                <option value="2x1">2 м × 1 м (стандарт)</option>
                <option value="other">Другой размер (уточним по телефону)</option>
            </select>

            <label for="quantity">Количество</label>
            <input id="quantity" name="quantity" type="number" min="1" placeholder="Например 50" required>

            <label id="commentLabel" for="comment" style="display:none;">Комментарий</label>
            <textarea id="comment" name="comment"
                      placeholder="Опишите нужный размер или другие особенности"
                      style="display:none;"></textarea>

            <button type="submit">Отправить заявку</button>
        </form>
    </div>

</div>

<a href="javascript:history.back()" class="back-button">← Назад</a>

<!-- Подключаем jQuery ПОСЛЕ всех HTML элементов -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Slick slider JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>

<!-- Подключение Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
    // Инициализация Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBhg8zPavbb346yeZunzvtlWr5DyND2jA8",
      authDomain: "izstroimetall.firebaseapp.com",
      projectId: "izstroimetall",
	  storageBucket: "izstroimetall.appspot.com",
      messagingSenderId: "833458681614",
      appId: "1:833458681614:web:b7015d3272adeb1ed1495f",
      measurementId: "G-P682QRH4FD"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Инициализация слайдера
    $(document).ready(function(){
        $('.slider').slick({
            autoplay: true,
            dots: true,
            arrows: true,
            adaptiveHeight: true
        });

        // Показывать поле комментария, если выбран "Другой размер"
        $('#size').change(function(){
            if($(this).val() === 'other'){
                $('#comment, #commentLabel').show();
                $('#comment').attr('required', 'required');
            } else {
                $('#comment, #commentLabel').hide();
                $('#comment').removeAttr('required');
            }
        });

        // Форматирование ввода телефона +7 (XXX) XXX-XX-XX
        $('#phone').on('input', function(e){
            let input = $(this).val().replace(/\D/g, ''); // Оставляем только цифры
            if(input.startsWith('7')) input = input.slice(1); // Убираем ведущую 7, если есть
            if(input.length > 10) input = input.slice(0,10); // Максимум 10 цифр после +7

            let formatted = '+7 ';
            if(input.length > 0){
                formatted += '(' + input.substring(0,3);
            }
            if(input.length >= 4){
                formatted += ') ' + input.substring(3,6);
            }
            if(input.length >= 7){
                formatted += '-' + input.substring(6,8);
            }
            if(input.length >= 9){
                formatted += '-' + input.substring(8,10);
            }
            $(this).val(formatted);
        });

        // Отправка формы
        $('#orderForm').submit(function(e){
            e.preventDefault();

            const name = $('#name').val().trim();
            const phone = $('#phone').val().trim();
            const size = $('#size').val();
            const quantity = $('#quantity').val();
            const comment = $('#comment').val().trim();

            // Проверка обязательных полей (браузер обычно сам проверяет, но можно дополнительно)
            if(!name || !phone || !size || !quantity){
                alert('Пожалуйста, заполните все обязательные поля');
                return;
            }
            // Проверка паттерна телефона
            const phonePattern = /^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/;
            if(!phonePattern.test(phone)){
                alert('Введите телефон в формате +7 (XXX) XXX-XX-XX');
                return;
            }

            // Сохраняем заявку в Firestore
            db.collection('orders').add({
                name: name,
                phone: phone,
                size: size,
                quantity: parseInt(quantity),
                comment: comment,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                alert('Заявка успешно отправлена!');
                $('#orderForm')[0].reset();
                $('#comment, #commentLabel').hide();
            }).catch(error => {
                alert('Ошибка отправки заявки: ' + error.message);
            });
        });
    });
</script>

</body>
</html>
